(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{39583:function(e,s,r){Promise.resolve().then(r.bind(r,93431))},93431:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return y}});var t=r(26705),n=r(20955),a=r(39311);let l=n.forwardRef((e,s)=>{let{className:r,...n}=e;return(0,t.jsx)("div",{ref:s,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...n})});l.displayName="Card";let i=n.forwardRef((e,s)=>{let{className:r,...n}=e;return(0,t.jsx)("div",{ref:s,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",r),...n})});i.displayName="CardHeader";let d=n.forwardRef((e,s)=>{let{className:r,...n}=e;return(0,t.jsx)("h3",{ref:s,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",r),...n})});d.displayName="CardTitle";let c=n.forwardRef((e,s)=>{let{className:r,...n}=e;return(0,t.jsx)("p",{ref:s,className:(0,a.cn)("text-sm text-muted-foreground",r),...n})});c.displayName="CardDescription";let o=n.forwardRef((e,s)=>{let{className:r,...n}=e;return(0,t.jsx)("div",{ref:s,className:(0,a.cn)("p-6 pt-0",r),...n})});o.displayName="CardContent";let x=n.forwardRef((e,s)=>{let{className:r,...n}=e;return(0,t.jsx)("div",{ref:s,className:(0,a.cn)("flex items-center p-6 pt-0",r),...n})});x.displayName="CardFooter";var m=r(94152),u=r(27855),h=r(45253),f=r(44876),j=r(16573),v=r(24235),p=r(50039),w=r(86812),N=r(11399);let g=[{name:"Jan",value:400},{name:"F\xe9v",value:300},{name:"Mar",value:600},{name:"Avr",value:800},{name:"Mai",value:500},{name:"Jun",value:900},{name:"Jul",value:1e3}];function b(){return(0,t.jsx)("div",{className:"h-[300px]",children:(0,t.jsx)(h.h,{width:"100%",height:"100%",children:(0,t.jsxs)(f.v,{data:g,children:[(0,t.jsx)(j.q,{strokeDasharray:"3 3"}),(0,t.jsx)(v.K,{dataKey:"name"}),(0,t.jsx)(p.B,{}),(0,t.jsx)(w.u,{}),(0,t.jsx)(N.$,{dataKey:"value",fill:"#8884d8"})]})})})}function y(){let{data:e}=(0,m.useQuery)({queryKey:["dashboard-stats"],queryFn:async()=>{let{data:e}=await u.O.rpc("get_dashboard_stats");return e}}),{data:s}=(0,m.useQuery)({queryKey:["recent-quotes"],queryFn:async()=>{let{data:e}=await u.O.from("quotes").select("*").order("created_at",{ascending:!1}).limit(5);return e}});return(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsx)("h1",{className:"mb-6 text-3xl font-bold",children:"Tableau de bord"}),(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,t.jsxs)(l,{children:[(0,t.jsxs)(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(d,{className:"text-sm font-medium",children:"Devis ce mois-ci"}),(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-4 w-4 text-muted-foreground",children:(0,t.jsx)("path",{d:"M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})})]}),(0,t.jsx)(o,{children:(0,t.jsx)("div",{className:"text-2xl font-bold",children:(null==e?void 0:e.quotes_this_month)||0})})]}),(0,t.jsxs)(l,{children:[(0,t.jsxs)(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(d,{className:"text-sm font-medium",children:"Clients actifs"}),(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-4 w-4 text-muted-foreground",children:[(0,t.jsx)("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),(0,t.jsx)("circle",{cx:"9",cy:"7",r:"4"}),(0,t.jsx)("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),(0,t.jsx)("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]})]}),(0,t.jsx)(o,{children:(0,t.jsx)("div",{className:"text-2xl font-bold",children:(null==e?void 0:e.active_clients)||0})})]}),(0,t.jsxs)(l,{children:[(0,t.jsxs)(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(d,{className:"text-sm font-medium",children:"Chiffre d'affaires"}),(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-4 w-4 text-muted-foreground",children:(0,t.jsx)("path",{d:"M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})})]}),(0,t.jsx)(o,{children:(0,t.jsxs)("div",{className:"text-2xl font-bold",children:[((null==e?void 0:e.revenue)||0).toLocaleString("fr-FR")," DH"]})})]}),(0,t.jsxs)(l,{children:[(0,t.jsxs)(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(d,{className:"text-sm font-medium",children:"Taux de conversion"}),(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-4 w-4 text-muted-foreground",children:(0,t.jsx)("path",{d:"M22 12h-4l-3 9L9 3l-3 9H2"})})]}),(0,t.jsx)(o,{children:(0,t.jsxs)("div",{className:"text-2xl font-bold",children:[(null==e?void 0:e.conversion_rate)||0,"%"]})})]})]}),(0,t.jsxs)("div",{className:"mt-6 grid gap-4 md:grid-cols-2",children:[(0,t.jsxs)(l,{className:"col-span-1",children:[(0,t.jsx)(i,{children:(0,t.jsx)(d,{children:"Activit\xe9 r\xe9cente"})}),(0,t.jsx)(o,{children:(0,t.jsx)(b,{})})]}),(0,t.jsxs)(l,{className:"col-span-1",children:[(0,t.jsx)(i,{children:(0,t.jsx)(d,{children:"Derniers devis"})}),(0,t.jsx)(o,{children:null==s?void 0:s.map(e=>(0,t.jsx)("div",{className:"mb-4 border-b pb-4 last:mb-0 last:border-b-0 last:pb-0",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:e.client_name}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:new Date(e.created_at).toLocaleDateString("fr-FR")})]}),(0,t.jsxs)("div",{className:"font-bold",children:[e.total_amount.toLocaleString("fr-FR")," DH"]})]})},e.id))})]})]})]})}},27855:function(e,s,r){"use strict";r.d(s,{O:function(){return l}});var t=r(2362);let n="https://lcrsfvfcyafpnjlfyhto.supabase.co",a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxjcnNmdmZjeWFmcG5qbGZ5aHRvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAyNzc4NzEsImV4cCI6MjA2NTg1Mzg3MX0.MivZD9SImprYVJG3zQwv-O5-4ODWJS2FKI4kvOgejoM";if(!n||!a)throw Error("Missing Supabase environment variables");let l=(0,t.eI)(n,a)},39311:function(e,s,r){"use strict";r.d(s,{cn:function(){return a}});var t=r(57042),n=r(74769);function a(){for(var e=arguments.length,s=Array(e),r=0;r<e;r++)s[r]=arguments[r];return(0,n.m6)((0,t.W)(s))}}},function(e){e.O(0,[283,362,417,152,106,121,26,560],function(){return e(e.s=39583)}),_N_E=e.O()}]);