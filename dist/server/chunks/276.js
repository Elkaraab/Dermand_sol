"use strict";exports.id=276,exports.ids=[276],exports.modules={45276:(e,r,s)=>{s.r(r),s.d(r,{default:()=>f});var i=s(60080),n=s(66558),t=s(83894),c=s(19098),o=s(68384),l=s(46701),d=s(49424),a=s(9885),x=s(23161);let u=a.forwardRef(({className:e,...r},s)=>i.jsx("textarea",{className:(0,x.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...r}));u.displayName="Textarea";var m=s(87502),p=s(57114),j=s(96254);let h=c.z.object({reference:c.z.string().min(2,{message:"La r\xe9f\xe9rence doit contenir au moins 2 caract\xe8res."}),name:c.z.string().min(2,{message:"Le nom doit contenir au moins 2 caract\xe8res."}),description:c.z.string().optional(),price:c.z.coerce.number().min(.01,{message:"Le prix doit \xeatre sup\xe9rieur \xe0 0."}),tax_rate:c.z.coerce.number().min(0).max(100,{message:"Le taux de TVA doit \xeatre entre 0 et 100%."}),stock:c.z.coerce.number().min(0,{message:"Le stock ne peut pas \xeatre n\xe9gatif."})});function f({initialData:e,productId:r}){let s=(0,p.useRouter)(),c=(0,n.cI)({resolver:(0,t.F)(h),defaultValues:e||{reference:"",name:"",description:"",price:0,tax_rate:20,stock:0}}),a=async e=>{try{if(r){let{error:s}=await j.O.from("products").update(e).eq("id",r);if(s)throw s;(0,m.Am)({title:"Produit mis \xe0 jour avec succ\xe8s"})}else{let{error:r}=await j.O.from("products").insert(e);if(r)throw r;(0,m.Am)({title:"Produit cr\xe9\xe9 avec succ\xe8s"})}s.refresh(),s.push("/products")}catch(e){(0,m.Am)({title:"Erreur",description:"Une erreur est survenue",variant:"destructive"})}};return i.jsx(l.l0,{...c,children:(0,i.jsxs)("form",{onSubmit:c.handleSubmit(a),className:"space-y-8",children:[(0,i.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[i.jsx(l.Wi,{control:c.control,name:"reference",render:({field:e})=>(0,i.jsxs)(l.xJ,{children:[i.jsx(l.lX,{children:"R\xe9f\xe9rence"}),i.jsx(l.NI,{children:i.jsx(d.I,{placeholder:"R\xe9f\xe9rence du produit",...e})}),i.jsx(l.zG,{})]})}),i.jsx(l.Wi,{control:c.control,name:"name",render:({field:e})=>(0,i.jsxs)(l.xJ,{children:[i.jsx(l.lX,{children:"Nom"}),i.jsx(l.NI,{children:i.jsx(d.I,{placeholder:"Nom du produit",...e})}),i.jsx(l.zG,{})]})}),i.jsx(l.Wi,{control:c.control,name:"price",render:({field:e})=>(0,i.jsxs)(l.xJ,{children:[i.jsx(l.lX,{children:"Prix unitaire (HT)"}),i.jsx(l.NI,{children:i.jsx(d.I,{type:"number",placeholder:"Prix",...e})}),i.jsx(l.zG,{})]})}),i.jsx(l.Wi,{control:c.control,name:"tax_rate",render:({field:e})=>(0,i.jsxs)(l.xJ,{children:[i.jsx(l.lX,{children:"Taux de TVA (%)"}),i.jsx(l.NI,{children:i.jsx(d.I,{type:"number",placeholder:"TVA",...e})}),i.jsx(l.zG,{})]})}),i.jsx(l.Wi,{control:c.control,name:"stock",render:({field:e})=>(0,i.jsxs)(l.xJ,{children:[i.jsx(l.lX,{children:"Stock disponible"}),i.jsx(l.NI,{children:i.jsx(d.I,{type:"number",placeholder:"Stock",...e})}),i.jsx(l.zG,{})]})}),i.jsx(l.Wi,{control:c.control,name:"description",render:({field:e})=>(0,i.jsxs)(l.xJ,{className:"md:col-span-2",children:[i.jsx(l.lX,{children:"Description"}),i.jsx(l.NI,{children:i.jsx(u,{placeholder:"Description du produit",className:"min-h-[100px]",...e})}),i.jsx(l.zG,{})]})})]}),(0,i.jsxs)("div",{className:"flex justify-end gap-4",children:[i.jsx(o.z,{type:"button",variant:"outline",onClick:()=>s.push("/products"),children:"Annuler"}),i.jsx(o.z,{type:"submit",children:r?"Mettre \xe0 jour":"Cr\xe9er"})]})]})})}}};