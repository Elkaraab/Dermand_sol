"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[929],{85929:function(e,r,t){t.r(r),t.d(r,{default:function(){return g}});var n=t(26705),s=t(61865),i=t(38110),o=t(74578),a=t(93023),c=t(41315),d=t(51908),l=t(20955),u=t(39311);let f=l.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)("textarea",{className:(0,u.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...s})});f.displayName="Textarea";var m=t(62621),x=t(24033),p=t(27855);let h=o.z.object({reference:o.z.string().min(2,{message:"La r\xe9f\xe9rence doit contenir au moins 2 caract\xe8res."}),name:o.z.string().min(2,{message:"Le nom doit contenir au moins 2 caract\xe8res."}),description:o.z.string().optional(),price:o.z.coerce.number().min(.01,{message:"Le prix doit \xeatre sup\xe9rieur \xe0 0."}),tax_rate:o.z.coerce.number().min(0).max(100,{message:"Le taux de TVA doit \xeatre entre 0 et 100%."}),stock:o.z.coerce.number().min(0,{message:"Le stock ne peut pas \xeatre n\xe9gatif."})});function g(e){let{initialData:r,productId:t}=e,o=(0,x.useRouter)(),l=(0,s.cI)({resolver:(0,i.F)(h),defaultValues:r||{reference:"",name:"",description:"",price:0,tax_rate:20,stock:0}}),u=async e=>{try{if(t){let{error:r}=await p.O.from("products").update(e).eq("id",t);if(r)throw r;(0,m.Am)({title:"Produit mis \xe0 jour avec succ\xe8s"})}else{let{error:r}=await p.O.from("products").insert(e);if(r)throw r;(0,m.Am)({title:"Produit cr\xe9\xe9 avec succ\xe8s"})}o.refresh(),o.push("/products")}catch(e){(0,m.Am)({title:"Erreur",description:"Une erreur est survenue",variant:"destructive"})}};return(0,n.jsx)(c.l0,{...l,children:(0,n.jsxs)("form",{onSubmit:l.handleSubmit(u),className:"space-y-8",children:[(0,n.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,n.jsx)(c.Wi,{control:l.control,name:"reference",render:e=>{let{field:r}=e;return(0,n.jsxs)(c.xJ,{children:[(0,n.jsx)(c.lX,{children:"R\xe9f\xe9rence"}),(0,n.jsx)(c.NI,{children:(0,n.jsx)(d.I,{placeholder:"R\xe9f\xe9rence du produit",...r})}),(0,n.jsx)(c.zG,{})]})}}),(0,n.jsx)(c.Wi,{control:l.control,name:"name",render:e=>{let{field:r}=e;return(0,n.jsxs)(c.xJ,{children:[(0,n.jsx)(c.lX,{children:"Nom"}),(0,n.jsx)(c.NI,{children:(0,n.jsx)(d.I,{placeholder:"Nom du produit",...r})}),(0,n.jsx)(c.zG,{})]})}}),(0,n.jsx)(c.Wi,{control:l.control,name:"price",render:e=>{let{field:r}=e;return(0,n.jsxs)(c.xJ,{children:[(0,n.jsx)(c.lX,{children:"Prix unitaire (HT)"}),(0,n.jsx)(c.NI,{children:(0,n.jsx)(d.I,{type:"number",placeholder:"Prix",...r})}),(0,n.jsx)(c.zG,{})]})}}),(0,n.jsx)(c.Wi,{control:l.control,name:"tax_rate",render:e=>{let{field:r}=e;return(0,n.jsxs)(c.xJ,{children:[(0,n.jsx)(c.lX,{children:"Taux de TVA (%)"}),(0,n.jsx)(c.NI,{children:(0,n.jsx)(d.I,{type:"number",placeholder:"TVA",...r})}),(0,n.jsx)(c.zG,{})]})}}),(0,n.jsx)(c.Wi,{control:l.control,name:"stock",render:e=>{let{field:r}=e;return(0,n.jsxs)(c.xJ,{children:[(0,n.jsx)(c.lX,{children:"Stock disponible"}),(0,n.jsx)(c.NI,{children:(0,n.jsx)(d.I,{type:"number",placeholder:"Stock",...r})}),(0,n.jsx)(c.zG,{})]})}}),(0,n.jsx)(c.Wi,{control:l.control,name:"description",render:e=>{let{field:r}=e;return(0,n.jsxs)(c.xJ,{className:"md:col-span-2",children:[(0,n.jsx)(c.lX,{children:"Description"}),(0,n.jsx)(c.NI,{children:(0,n.jsx)(f,{placeholder:"Description du produit",className:"min-h-[100px]",...r})}),(0,n.jsx)(c.zG,{})]})}})]}),(0,n.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,n.jsx)(a.z,{type:"button",variant:"outline",onClick:()=>o.push("/products"),children:"Annuler"}),(0,n.jsx)(a.z,{type:"submit",children:t?"Mettre \xe0 jour":"Cr\xe9er"})]})]})})}},93023:function(e,r,t){t.d(r,{z:function(){return d}});var n=t(26705),s=t(20955),i=t(54949),o=t(39213),a=t(39311);let c=(0,o.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,r)=>{let{className:t,variant:s,size:o,asChild:d=!1,...l}=e,u=d?i.g7:"button";return(0,n.jsx)(u,{className:(0,a.cn)(c({variant:s,size:o,className:t})),ref:r,...l})});d.displayName="Button"},41315:function(e,r,t){t.d(r,{NI:function(){return h},Wi:function(){return u},l0:function(){return d},lX:function(){return p},xJ:function(){return x},zG:function(){return b}});var n=t(26705),s=t(20955),i=t(54949),o=t(61865),a=t(39311),c=t(66672);let d=o.RV,l=s.createContext({}),u=e=>{let{...r}=e;return(0,n.jsx)(l.Provider,{value:{name:r.name},children:(0,n.jsx)(o.Qr,{...r})})},f=()=>{let e=s.useContext(l),r=s.useContext(m),{getFieldState:t,formState:n}=(0,o.Gc)(),i=t(e.name,n);if(!e)throw Error("useFormField should be used within <FormField>");let{id:a}=r;return{id:a,name:e.name,formItemId:"".concat(a,"-form-item"),formDescriptionId:"".concat(a,"-form-item-description"),formMessageId:"".concat(a,"-form-item-message"),...i}},m=s.createContext({}),x=s.forwardRef((e,r)=>{let{className:t,...i}=e,o=s.useId();return(0,n.jsx)(m.Provider,{value:{id:o},children:(0,n.jsx)("div",{ref:r,className:(0,a.cn)("space-y-2",t),...i})})});x.displayName="FormItem";let p=s.forwardRef((e,r)=>{let{className:t,...s}=e,{error:i,formItemId:o}=f();return(0,n.jsx)(c._,{ref:r,className:(0,a.cn)(i&&"text-destructive",t),htmlFor:o,...s})});p.displayName="FormLabel";let h=s.forwardRef((e,r)=>{let{...t}=e,{error:s,formItemId:o,formDescriptionId:a,formMessageId:c}=f();return(0,n.jsx)(i.g7,{ref:r,id:o,"aria-describedby":s?"".concat(a," ").concat(c):"".concat(a),"aria-invalid":!!s,...t})});h.displayName="FormControl";let g=s.forwardRef((e,r)=>{let{className:t,...s}=e,{formDescriptionId:i}=f();return(0,n.jsx)("p",{ref:r,id:i,className:(0,a.cn)("text-sm text-muted-foreground",t),...s})});g.displayName="FormDescription";let b=s.forwardRef((e,r)=>{let{className:t,children:s,...i}=e,{error:o,formMessageId:c}=f(),d=o?String(null==o?void 0:o.message):s;return d?(0,n.jsx)("p",{ref:r,id:c,className:(0,a.cn)("text-sm font-medium text-destructive",t),...i,children:d}):null});b.displayName="FormMessage"},51908:function(e,r,t){t.d(r,{I:function(){return o}});var n=t(26705),s=t(20955),i=t(39311);let o=s.forwardRef((e,r)=>{let{className:t,type:s,...o}=e;return(0,n.jsx)("input",{type:s,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...o})});o.displayName="Input"},66672:function(e,r,t){t.d(r,{_:function(){return d}});var n=t(26705),s=t(20955),i=t(90706),o=t(39213),a=t(39311);let c=(0,o.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)(i.f,{ref:r,className:(0,a.cn)(c(),t),...s})});d.displayName=i.f.displayName},62621:function(e,r,t){t.d(r,{Am:function(){return l}}),t(20955);let n=0,s=new Map,i=e=>{if(s.has(e))return;let r=setTimeout(()=>{s.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);s.set(e,r)},o=(e,r)=>{switch(r.type){case"ADD_TOAST":return{...e,toasts:[r.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===r.toast.id?{...e,...r.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=r;return t?i(t):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===r.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==r.toastId)}}},a=[],c={toasts:[]};function d(e){c=o(c,e),a.forEach(e=>{e(c)})}function l(e){let{...r}=e,t=(n=(n+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>d({type:"DISMISS_TOAST",toastId:t});return d({type:"ADD_TOAST",toast:{...r,id:t,open:!0,onOpenChange:e=>{e||s()}}}),{id:t,dismiss:s,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:t}})}}},27855:function(e,r,t){t.d(r,{O:function(){return o}});var n=t(2362);let s="https://lcrsfvfcyafpnjlfyhto.supabase.co",i="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxjcnNmdmZjeWFmcG5qbGZ5aHRvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAyNzc4NzEsImV4cCI6MjA2NTg1Mzg3MX0.MivZD9SImprYVJG3zQwv-O5-4ODWJS2FKI4kvOgejoM";if(!s||!i)throw Error("Missing Supabase environment variables");let o=(0,n.eI)(s,i)},39311:function(e,r,t){t.d(r,{cn:function(){return i}});var n=t(57042),s=t(74769);function i(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,s.m6)((0,n.W)(r))}}}]);