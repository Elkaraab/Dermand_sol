"use strict";exports.id=570,exports.ids=[570],exports.modules={40570:(e,s,r)=>{r.r(s),r.d(s,{default:()=>h});var l=r(60080),n=r(66558),i=r(83894),t=r(19098),c=r(68384),o=r(46701),a=r(49424),d=r(87502),x=r(57114),m=r(96254);let j=t.z.object({full_name:t.z.string().min(2,{message:"Le nom doit contenir au moins 2 caract\xe8res."}),email:t.z.string().email({message:"Veuillez entrer une adresse email valide."}),phone:t.z.string().min(10,{message:"Le num\xe9ro de t\xe9l\xe9phone doit contenir au moins 10 chiffres."}),address:t.z.string().min(5,{message:"L'adresse doit contenir au moins 5 caract\xe8res."}),city:t.z.string().min(2,{message:"La ville doit contenir au moins 2 caract\xe8res."}),postal_code:t.z.string().min(4,{message:"Le code postal doit contenir au moins 4 chiffres."})});function h({initialData:e,clientId:s}){let r=(0,x.useRouter)(),t=(0,n.cI)({resolver:(0,i.F)(j),defaultValues:e||{full_name:"",email:"",phone:"",address:"",city:"",postal_code:""}}),h=async e=>{try{if(s){let{error:r}=await m.O.from("clients").update(e).eq("id",s);if(r)throw r;(0,d.Am)({title:"Client mis \xe0 jour avec succ\xe8s"})}else{let{error:s}=await m.O.from("clients").insert(e);if(s)throw s;(0,d.Am)({title:"Client cr\xe9\xe9 avec succ\xe8s"})}r.refresh(),r.push("/clients")}catch(e){(0,d.Am)({title:"Erreur",description:"Une erreur est survenue",variant:"destructive"})}};return l.jsx(o.l0,{...t,children:(0,l.jsxs)("form",{onSubmit:t.handleSubmit(h),className:"space-y-8",children:[(0,l.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[l.jsx(o.Wi,{control:t.control,name:"full_name",render:({field:e})=>(0,l.jsxs)(o.xJ,{children:[l.jsx(o.lX,{children:"Nom complet"}),l.jsx(o.NI,{children:l.jsx(a.I,{placeholder:"Nom du client",...e})}),l.jsx(o.zG,{})]})}),l.jsx(o.Wi,{control:t.control,name:"email",render:({field:e})=>(0,l.jsxs)(o.xJ,{children:[l.jsx(o.lX,{children:"Email"}),l.jsx(o.NI,{children:l.jsx(a.I,{placeholder:"Email du client",...e})}),l.jsx(o.zG,{})]})}),l.jsx(o.Wi,{control:t.control,name:"phone",render:({field:e})=>(0,l.jsxs)(o.xJ,{children:[l.jsx(o.lX,{children:"T\xe9l\xe9phone"}),l.jsx(o.NI,{children:l.jsx(a.I,{placeholder:"Num\xe9ro de t\xe9l\xe9phone",...e})}),l.jsx(o.zG,{})]})}),l.jsx(o.Wi,{control:t.control,name:"address",render:({field:e})=>(0,l.jsxs)(o.xJ,{children:[l.jsx(o.lX,{children:"Adresse"}),l.jsx(o.NI,{children:l.jsx(a.I,{placeholder:"Adresse compl\xe8te",...e})}),l.jsx(o.zG,{})]})}),l.jsx(o.Wi,{control:t.control,name:"city",render:({field:e})=>(0,l.jsxs)(o.xJ,{children:[l.jsx(o.lX,{children:"Ville"}),l.jsx(o.NI,{children:l.jsx(a.I,{placeholder:"Ville",...e})}),l.jsx(o.zG,{})]})}),l.jsx(o.Wi,{control:t.control,name:"postal_code",render:({field:e})=>(0,l.jsxs)(o.xJ,{children:[l.jsx(o.lX,{children:"Code postal"}),l.jsx(o.NI,{children:l.jsx(a.I,{placeholder:"Code postal",...e})}),l.jsx(o.zG,{})]})})]}),(0,l.jsxs)("div",{className:"flex justify-end gap-4",children:[l.jsx(c.z,{type:"button",variant:"outline",onClick:()=>r.push("/clients"),children:"Annuler"}),l.jsx(c.z,{type:"submit",children:s?"Mettre \xe0 jour":"Cr\xe9er"})]})]})})}}};